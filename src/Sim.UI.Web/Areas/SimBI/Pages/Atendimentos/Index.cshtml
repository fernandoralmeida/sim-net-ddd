@page
@model Sim.UI.Web.Areas.SimBI.Pages.Atendimentos.IndexModel

@{
    Layout = "_Layout.cshtml";
    ViewData["Title"] = "Index";
}

<partial name="_StatusMessage" model="Model.StatusMessage" />

<div class="row">

    <ul class="collapsible popout">
        @foreach (var setor in Model.Input)
        {
            <li>
                <div class="collapsible-header">@setor.FirstOrDefault().Key<span class="new badge blue" data-badge-caption="@setor.FirstOrDefault().Value">Atendimentos</span></div>
                <div class="collapsible-body white">
                    <div class="row">
                        <div class="col s12 m4 l4">
                            <ul class="collection z-depth-1">
                                <li class="collection-item"><i class="material-icons right">handyman</i>Serviços Executados</li>
                                @foreach (var op in setor)
                                {
                                    @if (op.Key.Contains("Servico-"))
                                    {
                                        <li class="collection-item"><span class="new badge green lighten-1" data-badge-caption="@op.Value"></span>@op.Key.Replace("Servico-", "")</li>
                                    }
                                }
                            </ul>
                        </div>
                        <div class="col s12 m4 l4">
                            <ul class="collection z-depth-1">
                                <li class="collection-item"><i class="material-icons right">desktop_windows</i>Canais de Atendimento</li>
                                @foreach (var op in setor)
                                {
                                    @if (op.Key.Contains("Canal-"))
                                    {
                                        <li class="collection-item"><span class="new badge orange lighten-1" data-badge-caption="@op.Value"></span>@op.Key.Replace("Canal-", "")</li>
                                    }
                                }
                            </ul>
                        </div>
                        <div class="col s12 m4 l4">
                            <ul class="collection z-depth-1">
                                <li class="collection-item"><i class="material-icons right">account_box</i>Atendimento por Atendente</li>
                                @foreach (var op in setor)
                                {
                                    @if (op.Key.Contains("User-"))
                                    {
                                        <li class="collection-item"><span class="new badge blue lighten-1" data-badge-caption="@op.Value"></span>@op.Key.Replace("User-", "")</li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>
                </div>
            </li>
        }
    </ul>
</div>

<div class="center">
    <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Detalhar Meus Atendimentos</a>
</div>

<!-- Modal Structure -->
<div id="modal1" class="modal modal-fixed-footer">
    <div class="modal-content">
        <ul class="collection with-header">
            @foreach (var item in Model.ListaOperador.Atendimentos)
            {
                <li class="collection-header"><span class="new badge blue" data-badge-caption="@item.Value">@Html.DisplayFor(modelItem => item.Key)</span>@User.Identity.Name</li>
            }
            @foreach (var item in Model.ListaOperador.Servicos)
            {
                <li class="collection-item"><span class="new badge green" data-badge-caption="@item.Value"></span>@Html.DisplayFor(modelItem => item.Key)</li>
            }
        </ul>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close btn waves-effect waves-light">Fechar</a>
    </div>
</div>
